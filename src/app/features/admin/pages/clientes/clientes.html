
<div class="w-full h-full flex flex-col bg-[#111317] text-white">
  

  <div class="flex items-center p-4 border-b border-gray-700 flex-none">
    <span class="text-2xl font-bold font-montserrat">Clientes</span>
  </div>


  <div class="flex items-center justify-between gap-4 p-4 border-b border-gray-700 flex-none">
    <!-- Buscador -->
    <input 
      type="text"
      placeholder="Buscar clientes por nombre, email o documento..."
      class="w-full md:w-1/3 px-4 py-2 bg-[#1f242f] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#3c82f5] transition-colors"
    >

    <button 
      (click)="showCreateClienteDialog()"
      class="flex-none px-4 py-2 bg-[#3c82f5] text-white text-sm font-medium rounded-lg hover:bg-[#5a9aff] transition-colors"
    >
      Crear Cliente
    </button>
  </div>


  <div class="flex-1 p-4 overflow-y-auto">
    
    <!-- Indicador de carga -->
    <div *ngIf="loadingClientes" class="text-gray-400 text-sm animate-pulse mb-4">
      Cargando clientes...
    </div>

    <!-- Mensaje si no hay clientes --> 
    <div *ngIf="!loadingClientes && clientes.length === 0" class="text-gray-500 text-sm mb-4">
      No hay clientes registrados.
    </div>

    <!-- Contenedor de la Tabla -->
    <div *ngIf="!loadingClientes && clientes.length > 0" class="bg-[#1f242f] rounded-lg shadow-md overflow-hidden">
      <table class="w-full">
        <thead class="bg-[#151a23]">
          <tr>

            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
              Cliente
            </th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
              Documento
            </th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
              Teléfono
            </th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
              Estado
            </th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
              Acciones
            </th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-700">
          
          <tr *ngFor="let cliente of clientes" class="hover:bg-[#252b38] transition-colors">
            
            <!-- nombre email -->
            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white">
              <div class="flex flex-col">
                <span class="font-semibold">{{ cliente.customer_name }}</span>
                <span class="text-gray-400">{{ cliente.customer_email }}</span>
              </div>
            </td>

            <!--(Documento) -->
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">
              <div class="flex flex-col">
                <span>{{ getDocumentType(cliente.customer_typedocument) }}</span>
                <span class="text-gray-400">{{ cliente.customer_numberdocument }}</span>
              </div>
            </td>

            <!--(Teléfono) -->
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">
              {{ cliente.customer_phone }}
            </td>

            <!-- Columna: Estado -->
            <td class="px-6 py-4 whitespace-nowrap text-sm">
              <span
                class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full"
                [ngClass]="
                  cliente.customer_state === '1'
                    ? 'bg-green-600 text-green-100'
                    : 'bg-red-600 text-red-100'
                "
              >
                {{ cliente.customer_state === '1' ? 'Activo' : 'Inactivo' }}
              </span>
            </td>

            <!-- Columna: Acciones -->
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">
              <button 
                (click)="showEditClienteDialog(cliente)"
                class="text-[#3c82f5] hover:text-[#5a9aff] mr-3 transition-colors"
              >
                Editar
              </button>
            </td>
          </tr>

        </tbody>
      </table>
    </div>
  </div>
</div>

  <app-customer-modal
    [(visible)]="modalVisible"
    [mode]="modalMode"
    [initialData]="dataToEdit"
    (save)="onModalSave($event)"
  ></app-customer-modal>

  <p-toast [showTransitionOptions]="'250ms'" [showTransformOptions]="'translateX(100%)'" [hideTransitionOptions]="'150ms'" [hideTransformOptions]="'translateX(100%)'" />
